# 2026-02-02 Community UI + API Integration Design

## Architecture & Data Flow (200-300 words)
The frontend integrates directly with the MVP API described in `D:\develop\shared\community-docs\api.md`. A typed client (`lib/api.ts`, `lib/types.ts`) encapsulates all request logic with a single `requestJson` helper and explicit functions for auth, communities, feed/posts, and likes. The base URL defaults to `http://localhost:3000` and can be overridden via `EXPO_PUBLIC_API_BASE_URL`. The client optionally injects a bearer token via `EXPO_PUBLIC_API_TOKEN`, which enables protected routes without hard-wiring credentials into components. The Home screen performs parallel initial fetches (`Promise.all`) to avoid data waterfalls: communities and feed load concurrently, and subsequent community filter changes only re-fetch the feed. Data is stored in local component state with optimistic updates for likes; if the backend rejects the action, state is reverted to the prior values and an inline toast communicates the failure. The Explore screen performs a single communities fetch and reuses fallback data on failure so the UI remains presentable even when the API is offline. This structure isolates API concerns, keeps screens focused on presentation, and allows future extraction into hooks or data libraries (SWR/React Query) without changing UI structure.

## UI/UX System & Motion (200-300 words)
The visual system targets a modern, minimal, world‑class aesthetic that prioritizes clarity and hierarchy. A warm neutral canvas (`Colors.background`) anchors the interface, while soft surface cards and precise borders define sections. Typography uses an expressive pairing (Space Grotesk for display/title, Sora for body) to avoid generic defaults and create a distinctive, contemporary tone. Spacing, radii, and shadows are centralized in `constants/ui.ts` to ensure consistency and simplify tuning. The Home screen presents a hero headline, a compact action row, and a stats strip to surface momentum without clutter. Communities appear as pill chips with color accents; posts are elevated cards with strict spacing and minimal ornamentation. Motion is purposeful rather than noisy: content reveals via staggered `FadeInUp`/`FadeInDown` transitions, layout changes use springified layout animation, and press interactions scale subtly to reinforce touch feedback. Ambient floating orbs add depth without overwhelming the interface, satisfying the requirement for rich visual texture while keeping content first. Together, this system delivers “Occam’s razor” simplicity while still feeling premium.

## Error Handling, Extensibility, and Testing Notes (200-300 words)
Errors are surfaced unobtrusively: both Home and Explore show a lightweight toast when backend connectivity fails or a protected action is rejected. When connectivity is absent, the UI automatically falls back to curated sample data so designers and stakeholders can continue to evaluate layout and motion. Optimistic likes are rolled back on failure to maintain data integrity. The typed API layer includes endpoints for auth, posts, communities, and likes, which makes it straightforward to add login flows, create‑post modals, or community creation screens later. The same data model matches the PRD’s MVP modules (post, like, feed) and can extend to comments, memberships, or templates without breaking existing screen contracts. For testing, current changes are UI‑heavy; a next step would be to add Vitest coverage for the API client (error handling, URL building) and a lightweight UI test harness for state transitions such as optimistic likes. If the team wants to harden reliability, extracting API calls into dedicated hooks with retry and caching policies will reduce repeated fetches and centralize edge-case handling. This keeps the system clean while enabling growth.
